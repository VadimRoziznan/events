!function(){"use strict";class e{constructor(e,t,s){this.element=e,this.width=t,this.height=s}fieldGenerator(){for(let e=0;e<this.height;e++){const e=document.createElement("div");e.classList.add("grid"),this.element.appendChild(e);for(let t=0;t<this.width;t++){const t=document.createElement("div");t.classList.add("square"),e.appendChild(t)}}}}class t{constructor(){this.lastNumber=0}randomStep(e,t){let s,r;for(;s=Math.floor(Math.random()*e),r=Math.floor(Math.random()*t),s===this.lastNumber;);return this.lastNumber=s,{width:s,height:r}}}class s{constructor(e){this.element=e}createImage(e,t){const r=this.element.querySelectorAll(".square"),n=document.createElement("img");n.src="goblin.png",r.forEach((e=>{const t=e.childNodes[0];t&&s.removeImage(t)})),this.element.childNodes[e].childNodes[t].appendChild(n)}static removeImage(e){e.remove()}}class r{constructor(e){this.element=e,this.clickCountHit=0,this.clickCountMissed=0}changeCursor(){this.element.style.cursor='url("hammer_up.png"), auto'}rotateCursor(){this.element.addEventListener("mousedown",(e=>{this.element.style.cursor='url("hammer_down.png"), auto',"IMG"===e.target.tagName?(this.clickCountHit+=1,e.target.remove()):this.clickCountMissed+=1})),this.element.addEventListener("mouseup",(()=>{this.element.style.cursor='url("hammer_up.png"), auto'}))}resetCounter(){this.clickCountHit=0,this.clickCountMissed=0}}document.addEventListener("DOMContentLoaded",(()=>{const n=document.querySelector(".score"),o=document.querySelector(".life"),i=document.querySelector(".new-game");new e(document.querySelector(".field"),4,4).fieldGenerator();const c=new s(document.querySelector(".field")),l=new t,a=new r(document.querySelector(".field"));a.changeCursor(),a.rotateCursor();let d=!1;i.addEventListener("click",(()=>{if(a.resetCounter(),!d){const e=setInterval((()=>{d=!0,n.textContent=a.clickCountHit,o.textContent=a.clickCountMissed,5===a.clickCountHit&&(clearInterval(e),d=!1,alert("Вы выиграли!")),5===a.clickCountMissed&&(clearInterval(e),d=!1,alert("Вы проиграли!"));const t=l.randomStep(4,4);c.createImage(t.width,t.height)}),1e3)}}))}))}();